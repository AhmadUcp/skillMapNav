(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{32794:(e,r,t)=>{Promise.resolve().then(t.bind(t,53221))},76046:(e,r,t)=>{"use strict";var a=t(66658);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},53221:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(95155),s=t(12115),l=t(30106),o=t(82930),n=t(76046),i=t(56275);t(57775);let u=()=>{let[e,r]=(0,s.useState)(!0),[t,u]=(0,s.useState)(null),[c,d]=(0,s.useState)(""),[g,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[b,h]=(0,s.useState)(""),[y,x]=(0,s.useState)(!1),{user:w}=(0,o.Z)(),v=(0,n.useRouter)(),j=async e=>{if(e.preventDefault(),!c||!g||!p||!b){alert("Please fill in all required fields.");return}x(!0);try{let e=p.split(",").map(e=>e.trim().toLowerCase()),r={title:c,description:g,skills:e,link:b,createdAt:new Date},t=null==w?void 0:w.uid;if(!t)throw Error("User ID is required to save course data.");await (0,l.bX)(t,r),d(""),m(""),f(""),h(""),alert("Course uploaded successfully!"),v.push("/courses")}catch(e){alert("Failed to upload course data. Please try again.")}finally{x(!1)}},C=e=>new Promise((r,t)=>{let a=new FileReader;a.onload=async()=>{try{let e=new Uint8Array(a.result),t=await i.YE(e).promise,s="",l=t.numPages;for(let e=1;e<=l;e++){let r=await t.getPage(e),a=(await r.getTextContent()).items.map(e=>"str"in e?e.str:"").join(" ");s+=a+"\n"}r(s)}catch(e){t(e)}},a.onerror=t,a.readAsArrayBuffer(e)}),k=async()=>{if(!t){alert("Please upload a PDF file.");return}x(!0);try{let e=await C(t),r=await (0,l.UH)(e);if(console.log(r),!r||0===r.length){alert("No courses found in the PDF.");return}let a=null==w?void 0:w.uid;if(!a)throw Error("User ID is required to save course data.");for(let e of r){let{title:r,description:t,skills:s,link:o}=e,n={title:r||"Untitled",description:t||"No description",skills:s||["No skills"],link:o||"No link",createdAt:new Date};try{await (0,l.bX)(a,n),console.log("Course uploaded: ".concat(r))}catch(e){console.error("Error uploading course: ".concat(r),e),alert("Failed to upload course: ".concat(r))}}alert("All courses uploaded successfully!"),v.push("/courses")}catch(e){console.error("Error extracting courses from PDF:",e),alert("Failed to upload courses. Please try again.")}finally{x(!1)}},N=(0,s.useCallback)(e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];t&&"application/pdf"===t.type?u(t):alert("Please select a valid PDF file.")},[]);return(0,a.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded-lg shadow-lg max-w-4xl",children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold text-center text-blue-600 mb-6",children:"Upload a Course"}),(0,a.jsxs)("div",{className:"flex justify-center mb-6",children:[(0,a.jsx)("button",{onClick:()=>r(!0),className:"px-4 py-2 rounded-l-lg ".concat(e?"bg-blue-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:"Upload via PDF"}),(0,a.jsx)("button",{onClick:()=>r(!1),className:"px-4 py-2 rounded-r-lg ".concat(e?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-blue-600 text-white"),children:"Fill Form Manually"})]}),e?(0,a.jsxs)("div",{className:"bg-gray-100 p-6 rounded-lg shadow-inner",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Upload PDF having all Courses:"}),(0,a.jsx)("input",{type:"file",accept:"application/pdf",onChange:N,className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{type:"button",onClick:k,className:"mt-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-200",disabled:y,children:y?"Uploading...":"Upload PDF"})]}):(0,a.jsxs)("form",{onSubmit:j,className:"bg-gray-100 p-6 rounded-lg shadow-inner",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Course Title:"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter course title",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Course Description:"}),(0,a.jsx)("textarea",{value:g,onChange:e=>m(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Enter course description",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Skills:"}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter skills separated by commas",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Enrollment Link:"}),(0,a.jsx)("input",{type:"text",value:b,onChange:e=>h(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter enrollment link",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"mt-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-200",disabled:y,children:y?"Uploading...":"Upload Course"})]})]})}},30106:(e,r,t)=>{"use strict";t.d(r,{D:()=>i,J4:()=>c,Rt:()=>p,UH:()=>d,bX:()=>n,zs:()=>u});var a=t(92264),s=t(27058),l=t(88046),o=t.n(l);let n=async(e,r)=>{try{let t=(0,s.rJ)(a.db,"courses",e,"userCourses");await (0,s.gS)(t,r)}catch(e){throw console.error("Error saving course data:",e),e}},i=async e=>{let r=(0,s.rJ)(a.db,"courses",e,"userCourses");return(await (0,s.GG)(r)).docs.map(e=>({id:e.id,...e.data()}))},u=async(e,r)=>{let t=(0,s.H9)(a.db,"courses",e,"userCourses",r);await (0,s.kd)(t)},c=async(e,r,t)=>{let l=(0,s.H9)(a.db,"courses",e,"userCourses",r);await (0,s.mZ)(l,t)},d=async e=>{try{let r=await o()("so I need you to make course objects having title, description,skills and link. \n    return variable named as data having all courses from \n".concat(e)),t=JSON.parse(r).data||[];return console.log("Extracted Skills:",t),t}catch(e){throw console.error("Error extracting skills from PDF:",e),e}},g=async()=>{try{let e=(0,s.P)((0,s.rJ)(a.db,"users"),(0,s._M)("role","==","Company"));return(await (0,s.GG)(e)).docs.map(e=>e.id)}catch(e){return console.error("Error fetching user IDs of companies:",e),[]}};async function m(e){let r=(0,s.rJ)(a.db,"courses",e,"userCourses");return(await (0,s.GG)(r)).docs.map(e=>e.data())}async function p(e){try{let r=(await g()).map(async r=>(await m(r)).filter(r=>r.skills.some(r=>e.includes(r))));return(await Promise.all(r)).flat()}catch(e){return console.error("Error fetching relevant courses:",e),[]}}g().then(e=>{console.log("User IDs:",e)}).catch(e=>{console.error("Error fetching user IDs:",e)})},92264:(e,r,t)=>{"use strict";t.d(r,{db:()=>i,j2:()=>u});var a=t(49904),s=t(27058),l=t(80333),o=t(14565);let n=(0,a.Wp)({apiKey:"AIzaSyBJiKAulzrw1igg9paw_qRqYPX-orpHC3M",authDomain:"sample-firebase-ai-app-13fca.firebaseapp.com",projectId:"sample-firebase-ai-app-13fca",storageBucket:"sample-firebase-ai-app-13fca.firebasestorage.app",messagingSenderId:"776146262459",appId:"1:776146262459:web:e41cc1003826f8d4070c9e"}),i=(0,s.aU)(n);(0,l.c7)(n);let u=(0,o.xI)(n);new o.HF},88046:(e,r,t)=>{"use strict";let{GoogleGenerativeAI:a}=t(66157),s=new a("AIzaSyC1R1fZ44je-IweJr3wfDGAD7YBBaFQzQU").getGenerativeModel({model:"gemini-1.5-flash"}),l={temperature:1,topP:.95,topK:40,maxOutputTokens:8192,responseMimeType:"application/json"};async function o(e){try{let r=s.startChat({generationConfig:l,history:[]});return(await r.sendMessage(e)).response.text()}catch(e){throw console.error("Error in Gemini API call:",e),Error("Failed to analyze skills using Gemini AI")}}e.exports=o},82930:(e,r,t)=>{"use strict";t.d(r,{Z:()=>c,default:()=>u});var a=t(95155),s=t(92264),l=t(14565),o=t(27058),n=t(12115);let i=(0,n.createContext)(null);function u(e){let{children:r}=e,[t,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=(0,l.hg)(s.j2,e=>{e?c(e.uid):u(null)});return()=>e()},[]);let c=async e=>{let r=(0,o.H9)(s.db,"users",e);try{var t;let e=(await (0,o.x7)(r)).data();if(!e)return;let a={...e,emailVerified:(null===(t=s.j2.currentUser)||void 0===t?void 0:t.emailVerified)||!1};u(a)}catch(e){console.error("Error fetching user data:",e)}},d=async()=>{let e=s.j2.currentUser;if(e)try{await (0,l.gA)(e),alert("Verification email sent!")}catch(e){console.error("Error sending verification email:",e),alert("Failed to send verification email.")}},g=async()=>{try{await (0,l.CI)(s.j2),u(null)}catch(e){console.error("Error logging out:",e),alert("Failed to log out.")}};return(0,a.jsx)(i.Provider,{value:{user:t,setUser:u,resendVerificationEmail:d,logout:g},children:r})}let c=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useAuthContext must be used within an AuthContextProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,697,473,84,714,252,157,441,517,358],()=>r(32794)),_N_E=e.O()}]);