(()=>{var e={};e.id=248,e.ids=[248],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},69701:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u});var s=t(70260),a=t(28203),o=t(25155),l=t.n(o),i=t(67292),n={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(r,n);let u=["",{children:["courses",{children:["uploadCourse",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,26287)),"D:\\MY PROJECTS\\Web Dev\\skill-main\\src\\app\\courses\\uploadCourse\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"D:\\MY PROJECTS\\Web Dev\\skill-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\MY PROJECTS\\Web Dev\\skill-main\\src\\app\\courses\\uploadCourse\\page.tsx"],d={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/courses/uploadCourse/page",pathname:"/courses/uploadCourse",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},25750:(e,r,t)=>{Promise.resolve().then(t.bind(t,26287))},49310:(e,r,t)=>{Promise.resolve().then(t.bind(t,939))},939:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(45512),a=t(58009),o=t(8066),l=t(57312),i=t(79334),n=t(77181);t(13031);let u=()=>{let[e,r]=(0,a.useState)(!0),[t,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[f,y]=(0,a.useState)(!1),{user:v}=(0,l.Z)(),w=(0,i.useRouter)(),C=async e=>{if(e.preventDefault(),!c||!p||!g||!x){alert("Please fill in all required fields.");return}y(!0);try{let e=g.split(",").map(e=>e.trim().toLowerCase()),r={title:c,description:p,skills:e,link:x,createdAt:new Date},t=v?.uid;if(!t)throw Error("User ID is required to save course data.");await (0,o.bX)(t,r),d(""),m(""),b(""),h(""),alert("Course uploaded successfully!"),w.push("/courses")}catch(e){alert("Failed to upload course data. Please try again.")}finally{y(!1)}},P=e=>new Promise((r,t)=>{let s=new FileReader;s.onload=async()=>{try{let e=new Uint8Array(s.result),t=await n.YE(e).promise,a="",o=t.numPages;for(let e=1;e<=o;e++){let r=await t.getPage(e),s=(await r.getTextContent()).items.map(e=>"str"in e?e.str:"").join(" ");a+=s+"\n"}r(a)}catch(e){t(e)}},s.onerror=t,s.readAsArrayBuffer(e)}),k=async()=>{if(!t){alert("Please upload a PDF file.");return}y(!0);try{let e=await P(t),r=await (0,o.UH)(e);if(console.log(r),!r||0===r.length){alert("No courses found in the PDF.");return}let s=v?.uid;if(!s)throw Error("User ID is required to save course data.");for(let e of r){let{title:r,description:t,skills:a,link:l}=e,i={title:r||"Untitled",description:t||"No description",skills:a||["No skills"],link:l||"No link",createdAt:new Date};try{await (0,o.bX)(s,i),console.log(`Course uploaded: ${r}`)}catch(e){console.error(`Error uploading course: ${r}`,e),alert(`Failed to upload course: ${r}`)}}alert("All courses uploaded successfully!"),w.push("/courses")}catch(e){console.error("Error extracting courses from PDF:",e),alert("Failed to upload courses. Please try again.")}finally{y(!1)}},j=(0,a.useCallback)(e=>{let r=e.target.files?.[0];r&&"application/pdf"===r.type?u(r):alert("Please select a valid PDF file.")},[]);return(0,s.jsxs)("div",{className:"container mx-auto p-6 bg-white rounded-lg shadow-lg max-w-4xl",children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-center text-blue-600 mb-6",children:"Upload a Course"}),(0,s.jsxs)("div",{className:"flex justify-center mb-6",children:[(0,s.jsx)("button",{onClick:()=>r(!0),className:`px-4 py-2 rounded-l-lg ${e?"bg-blue-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:"Upload via PDF"}),(0,s.jsx)("button",{onClick:()=>r(!1),className:`px-4 py-2 rounded-r-lg ${e?"bg-gray-200 text-gray-600 hover:bg-gray-300":"bg-blue-600 text-white"}`,children:"Fill Form Manually"})]}),e?(0,s.jsxs)("div",{className:"bg-gray-100 p-6 rounded-lg shadow-inner",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Upload PDF having all Courses:"}),(0,s.jsx)("input",{type:"file",accept:"application/pdf",onChange:j,className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{type:"button",onClick:k,className:"mt-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-200",disabled:f,children:f?"Uploading...":"Upload PDF"})]}):(0,s.jsxs)("form",{onSubmit:C,className:"bg-gray-100 p-6 rounded-lg shadow-inner",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Course Title:"}),(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter course title",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Course Description:"}),(0,s.jsx)("textarea",{value:p,onChange:e=>m(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Enter course description",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Skills:"}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter skills separated by commas",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-lg font-semibold mb-2 text-gray-700",children:"Enrollment Link:"}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"w-full p-3 border-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter enrollment link",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"mt-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 transition duration-200",disabled:f,children:f?"Uploading...":"Upload Course"})]})]})}},8066:(e,r,t)=>{"use strict";t.d(r,{D:()=>n,J4:()=>c,Rt:()=>g,UH:()=>d,bX:()=>i,zs:()=>u});var s=t(5600),a=t(17656),o=t(47846),l=t.n(o);let i=async(e,r)=>{try{let t=(0,a.rJ)(s.db,"courses",e,"userCourses");await (0,a.gS)(t,r)}catch(e){throw console.error("Error saving course data:",e),e}},n=async e=>{let r=(0,a.rJ)(s.db,"courses",e,"userCourses");return(await (0,a.GG)(r)).docs.map(e=>({id:e.id,...e.data()}))},u=async(e,r)=>{let t=(0,a.H9)(s.db,"courses",e,"userCourses",r);await (0,a.kd)(t)},c=async(e,r,t)=>{let o=(0,a.H9)(s.db,"courses",e,"userCourses",r);await (0,a.mZ)(o,t)},d=async e=>{try{let r=`so I need you to make course objects having title, description,skills and link. 
    return variable named as data having all courses from 
${e}`,t=await l()(r),s=JSON.parse(t).data||[];return console.log("Extracted Skills:",s),s}catch(e){throw console.error("Error extracting skills from PDF:",e),e}},p=async()=>{try{let e=(0,a.P)((0,a.rJ)(s.db,"users"),(0,a._M)("role","==","Company"));return(await (0,a.GG)(e)).docs.map(e=>e.id)}catch(e){return console.error("Error fetching user IDs of companies:",e),[]}};async function m(e){let r=(0,a.rJ)(s.db,"courses",e,"userCourses");return(await (0,a.GG)(r)).docs.map(e=>e.data())}async function g(e){try{let r=(await p()).map(async r=>(await m(r)).filter(r=>r.skills.some(r=>e.includes(r))));return(await Promise.all(r)).flat()}catch(e){return console.error("Error fetching relevant courses:",e),[]}}p().then(e=>{console.log("User IDs:",e)}).catch(e=>{console.error("Error fetching user IDs:",e)})},26287:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\MY PROJECTS\\\\Web Dev\\\\skill-main\\\\src\\\\app\\\\courses\\\\uploadCourse\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\MY PROJECTS\\Web Dev\\skill-main\\src\\app\\courses\\uploadCourse\\page.tsx","default")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[989,515,77,889,931,776],()=>t(69701));module.exports=s})();